!function(t){var e={project:{preload:[],namespace:"ym",jsonpPrefix:"",loadLimit:500},ns:{},env:{},envCallbacks:[]};e.modules=t.ym.modules,e.modules.define("preset.svgIcon",["option.presetStorage","layout.svgIcon"],function(t,e){e.add("custom#svgIcon",{iconLayout:"svg#iconLayout"}),t({})}),e.modules.define("svgIcon.canvasBuilder",["util.dom.element","util.dom.style","vow","storage.svgIcon","util.svgTools"],function(t,e,n,r,i,a){function o(t,e){return[t[0]*e[0]+t[1]*e[2]+e[4],t[0]*e[1]+t[1]*e[3]+e[5]]}function s(t,e){var n=[];return t.forEach(function(t){var r,i=[t[0]];for(r=1;r<t.length;r+=2)i=i.concat(o([t[r],t[r+1]],e));n.push(i)}),n}function c(t,e){return s(t,[e,0,0,e,0,0])}function l(t,e,n){return s(t,[1,0,0,1,e,n])}function u(t,e){var n=a.getBBox(t);return t=l(a.toCubic(t),-n.x,-n.y),t=c(t,e.scale),{path:t,width:n.width*e.scale,height:n.height*e.scale}}t({build:function(t){var e,n=document.createElement("canvas"),r=t.path,a=i.get(r);return a||(a=u(r,t),i.set(r,a)),e=n.getContext("2d"),n.width=a.width,n.height=a.height,e.beginPath(),e.fillStyle=t.fill,a.path.forEach(function(t){var n="m"==t[0].toLowerCase()?"moveTo":"bezierCurveTo";e[n].apply(e,t.slice(1))}),e.fill(),n}})}),e.modules.define("layout.svgIcon",["templateLayoutFactory","util.css","Monitor","layout.storage","util.dom.style","util.dom.element","system.nextTick","svgIcon.canvasBuilder","svgIcon.pathCollection"],function(t,e,n,r,i,a,o,s,c,l){var u=n.addPrefix("svg-icon"),f=n.addPrefix("svg-label"),y=e.createClass(["<ymaps class="+u+' style="display: block">','<i class="'+f+'"></i>',"</ymaps>"].join(""),{build:function(){y.superclass.build.call(this),this.options=this.getData().options,a.css(this.getElement(),{position:"absolute",visibility:"hidden"}),this._setupAll(),s(this._onAfterBuild.bind(this))},_setupAll:function(){this._canvas=c.build({path:this.options.get("path",l.SQUARE_PIN),fill:this.options.get("fill","#555555"),scale:this.options.get("scale",1)});var t={type:"Rectangle",coordinates:[[0,0],[this._canvas.width,this._canvas.height]]};this.options.set({shape:this.options.get("shape",t)}),this._setupCanvas(),this._setupLabel()},_setupLabel:function(){var t=o.findByClassName(this.getElement(),f);a.css(t,{position:"absolute",top:0,right:0,bottom:0,left:0,textAlign:"center",lineHeight:this._canvas.height+"px"}),t.className+=" "+this.getData().options.get("label","")},_setupCanvas:function(){o.findByClassName(this.getElement(),u).appendChild(this._canvas)},_onAfterBuild:function(){var t=this._canvas;this.options.getParent().set("offset",[-t.width/2,-t.height]),a.css(this.getElement(),{visibility:"visible"})},_removeCanvas:function(){this._canvas&&this._canvas.remove(),this._canvas=null}});i.add("svg#iconLayout",y),t(y)}),e.modules.define("svgIcon.pathCollection",function(t){t({SHIELD:"M18.8-31.8c.3-3.4 1.3-6.6 3.2-9.5l-7-6.7c-2.2 1.8-4.8 2.8-7.6 3-2.6.2-5.1-.2-7.5-1.4-2.4 1.1-4.9 1.6-7.5 1.4-2.7-.2-5.1-1.1-7.3-2.7l-7.1 6.7c1.7 2.9 2.7 6 2.9 9.2.1 1.5-.3 3.5-1.3 6.1-.5 1.5-.9 2.7-1.2 3.8-.2 1-.4 1.9-.5 2.5 0 2.8.8 5.3 2.5 7.5 1.3 1.6 3.5 3.4 6.5 5.4 3.3 1.6 5.8 2.6 7.6 3.1.5.2 1 .4 1.5.7l1.5.6c1.2.7 2 1.4 2.4 2.1.5-.8 1.3-1.5 2.4-2.1.7-.3 1.3-.5 1.9-.8.5-.2.9-.4 1.1-.5.4-.1.9-.3 1.5-.6.6-.2 1.3-.5 2.2-.8 1.7-.6 3-1.1 3.8-1.6 2.9-2 5.1-3.8 6.4-5.3 1.7-2.2 2.6-4.8 2.5-7.6-.1-1.3-.7-3.3-1.7-6.1-.9-2.8-1.3-4.9-1.2-6.4z",ROUTE:"M24-28.3c-.2-13.3-7.9-18.5-8.3-18.7l-1.2-.8-1.2.8c-2 1.4-4.1 2-6.1 2-3.4 0-5.8-1.9-5.9-1.9l-1.3-1.1-1.3 1.1c-.1.1-2.5 1.9-5.9 1.9-2.1 0-4.1-.7-6.1-2l-1.2-.8-1.2.8c-.8.6-8 5.9-8.2 18.7-.2 1.1 2.9 22.2 23.9 28.3 22.9-6.7 24.1-26.9 24-28.3z",SQUARE_PIN:"M22-48h-44v43h16l6 5 6-5h16z",SQUARE:"M-24-48h48v48h-48z",SQUARE_ROUNDED:"M24-8c0 4.4-3.6 8-8 8h-32c-4.4 0-8-3.6-8-8v-32c0-4.4 3.6-8 8-8h32c4.4 0 8 3.6 8 8v32z"})}),e.modules.define("storage.svgIcon",function(t){var e,n="path_",r={};e={set:function(t,n){r[e.getKey(t)]=n},get:function(t){return r[e.getKey(t)]},isExist:function(t){return Boolean(r[e.getKey(t)])},getKey:function(t){return-1===t.indexOf(n)?e.generateKey(t):t},generateKey:function(t){return n+t.replace(/[, -]/g,"").toLowerCase()}},t(e)}),e.modules.define("util.svgTools",function(t){function e(t){var n=e.ps=e.ps||{};return n[t]?n[t].sleep=100:n[t]={sleep:100},setTimeout(function(){for(var e in n)n[R](e)&&e!=t&&(n[e].sleep--,!n[e].sleep&&delete n[e])}),n[t]}function n(t,e,n){function r(){var i=Array.prototype.slice.call(arguments,0),a=i.join("â€"),o=r.cache=r.cache||{},s=r.count=r.count||[];return o[R](a)?(repush(s,a),n?n(o[a]):o[a]):(s.length>=1e3&&delete o[s.shift()],s.push(a),o[a]=t.apply(e,i),n?n(o[a]):o[a])}return r}function r(t,e){return e=G.prototype.toLowerCase.call(e),"finite"==e?isFinite(t):"array"==e&&(t instanceof Array||Array.isArray&&Array.isArray(t))?!0:"null"==e&&null===t||e==typeof t&&null!==t||"object"==e&&t===Object(t)||Z.call(t).slice(8,-1).toLowerCase()==e}function i(t){if("function"==typeof t||Object(t)!==t)return t;var e=new t.constructor;for(var n in t)t[R](n)&&(e[n]=i(t[n]));return e}function a(t){if(!t)return null;var n=e(t);if(n.arr)return f(n.arr);var i={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},a=[];return r(t,"array")&&r(t[0],"array")&&(a=f(t)),a.length||G(t).replace(W,function(t,e,n){var r=[],o=e.toLowerCase();if(n.replace($,function(t,e){e&&r.push(+e)}),"m"==o&&r.length>2&&(a.push([e].concat(r.splice(0,2))),o="l",e="m"==e?"l":"L"),"o"==o&&1==r.length&&a.push([e,r[0]]),"r"==o)a.push([e].concat(r));else for(;r.length>=i[o]&&(a.push([e].concat(r.splice(0,i[o]))),i[o]););}),a.toString=u,n.arr=f(a),a}function o(t,e){if(e){if("#text"==t&&(t=glob.doc.createTextNode(e.text||e["#text"]||"")),"#comment"==t&&(t=glob.doc.createComment(e.text||e["#text"]||"")),"string"==typeof t&&(t=o(t)),"string"==typeof e)return 1==t.nodeType?"xlink:"==e.substring(0,6)?t.getAttributeNS(xlink,e.substring(6)):"xml:"==e.substring(0,4)?t.getAttributeNS(xmlns,e.substring(4)):t.getAttribute(e):"text"==e?t.nodeValue:null;if(1==t.nodeType){for(var n in e)if(e[R](n)){var r=G(e[n]);r?"xlink:"==n.substring(0,6)?t.setAttributeNS(xlink,n.substring(6),r):"xml:"==n.substring(0,4)?t.setAttributeNS(xmlns,n.substring(4),r):t.setAttribute(n,r):t.removeAttribute(n)}}else"text"in e&&(t.nodeValue=e.text)}else t=glob.doc.createElementNS(xmlns,t);return t}function s(t){return t.node.ownerSVGElement&&wrap(t.node.ownerSVGElement)||Snap.select("svg")}function c(t,e,n){function r(t){if(null==t)return E;if(t==+t)return t;o(u,{width:t});try{return u.getBBox().width}catch(e){return 0}}function i(t){if(null==t)return E;if(t==+t)return t;o(u,{height:t});try{return u.getBBox().height}catch(e){return 0}}function a(r,i){null==e?l[r]=i(t.attr(r)||0):r==e&&(l=i(null==n?t.attr(r)||0:n))}var c=s(t).node,l={},u=c.querySelector(".svg---mgr");switch(u||(u=o("rect"),o(u,{x:-9e9,y:-9e9,width:10,height:10,"class":"svg---mgr",fill:"none"}),c.appendChild(u)),t.type){case"rect":a("rx",r),a("ry",i);case"image":a("width",r),a("height",i);case"text":a("x",r),a("y",i);break;case"circle":a("cx",r),a("cy",i),a("r",r);break;case"ellipse":a("cx",r),a("cy",i),a("rx",r),a("ry",i);break;case"line":a("x1",r),a("x2",r),a("y1",i),a("y2",i);break;case"marker":a("refX",r),a("markerWidth",r),a("refY",i),a("markerHeight",i);break;case"radialGradient":a("fx",r),a("fy",i);break;case"tspan":a("dx",r),a("dy",i);break;default:a(e,r)}return c.removeChild(u),l}function l(t,e,n,r){return null==t&&(t=e=n=r=0),null==e&&(e=t.y,n=t.width,r=t.height,t=t.x),{x:t,y:e,width:n,w:n,height:r,h:r,x2:t+n,y2:e+r,cx:t+n/2,cy:e+r/2,r1:Q.min(n,r)/2,r2:Q.max(n,r)/2,r0:Q.sqrt(n*n+r*r)/2,path:q(t,e,n,r),vb:[t,e,n,r].join(" ")}}function u(){return this.join(",").replace(O,"$1")}function f(t){var e=i(t);return e.toString=u,e}function y(t,e,n,r,i,a,o,s,c){return null==c?b(t,e,n,r,i,a,o,s):x(t,e,n,r,i,a,o,s,m(t,e,n,r,i,a,o,s,c))}function h(t,e){function r(t){return+(+t).toFixed(3)}return n(function(n,i,a){n instanceof Element&&(n=n.attr("d")),n=N(n);for(var o,s,c,l,u,f="",h={},p=0,g=0,v=n.length;v>g;g++){if(c=n[g],"M"==c[0])o=+c[1],s=+c[2];else{if(l=y(o,s,c[1],c[2],c[3],c[4],c[5],c[6]),p+l>i){if(e&&!h.start){if(u=y(o,s,c[1],c[2],c[3],c[4],c[5],c[6],i-p),f+=["C"+r(u.start.x),r(u.start.y),r(u.m.x),r(u.m.y),r(u.x),r(u.y)],a)return f;h.start=f,f=["M"+r(u.x),r(u.y)+"C"+r(u.n.x),r(u.n.y),r(u.end.x),r(u.end.y),r(c[5]),r(c[6])].join(),p+=l,o=+c[5],s=+c[6];continue}if(!t&&!e)return u=y(o,s,c[1],c[2],c[3],c[4],c[5],c[6],i-p)}p+=l,o=+c[5],s=+c[6]}f+=c.shift()+c}return h.end=f,u=t?p:e?h:x(o,s,c[0],c[1],c[2],c[3],c[4],c[5],1)},null,i)}function x(t,e,n,r,i,a,o,s,c){var l=1-c,u=X(l,3),f=X(l,2),y=c*c,h=y*c,x=u*t+3*f*c*n+3*l*c*c*i+h*o,p=u*e+3*f*c*r+3*l*c*c*a+h*s,g=t+2*c*(n-t)+y*(i-2*n+t),v=e+2*c*(r-e)+y*(a-2*r+e),d=n+2*c*(i-n)+y*(o-2*i+n),b=r+2*c*(a-r)+y*(s-2*a+r),m=l*t+c*n,C=l*e+c*r,k=l*i+c*o,M=l*a+c*s,w=90-180*Q.atan2(g-d,v-b)/V;return{x:x,y:p,m:{x:g,y:v},n:{x:d,y:b},start:{x:m,y:C},end:{x:k,y:M},alpha:w}}function p(t,e,n,i,a,o,s,c){r(t,"array")||(t=[t,e,n,i,a,o,s,c]);var u=U.apply(null,t);return l(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)}function g(t,e,n){return e>=t.x&&e<=t.x+t.width&&n>=t.y&&n<=t.y+t.height}function v(t,e){return t=l(t),e=l(e),g(e,t.x,t.y)||g(e,t.x2,t.y)||g(e,t.x,t.y2)||g(e,t.x2,t.y2)||g(t,e.x,e.y)||g(t,e.x2,e.y)||g(t,e.x,e.y2)||g(t,e.x2,e.y2)||(t.x<e.x2&&t.x>e.x||e.x<t.x2&&e.x>t.x)&&(t.y<e.y2&&t.y>e.y||e.y<t.y2&&e.y>t.y)}function d(t,e,n,r,i){var a=-3*e+9*n-9*r+3*i,o=t*a+6*e-12*n+6*r;return t*o-3*e+3*n}function b(t,e,n,r,i,a,o,s,c){null==c&&(c=1),c=c>1?1:0>c?0:c;for(var l=c/2,u=12,f=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],y=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],h=0,x=0;u>x;x++){var p=l*f[x]+l,g=d(p,t,n,i,o),v=d(p,e,r,a,s),b=g*g+v*v;h+=y[x]*Q.sqrt(b)}return l*h}function m(t,e,n,r,i,a,o,s,c){if(!(0>c||b(t,e,n,r,i,a,o,s)<c)){var l,u=1,f=u/2,y=u-f,h=.01;for(l=b(t,e,n,r,i,a,o,s,y);Y(l-c)>h;)f/=2,y+=(c>l?1:-1)*f,l=b(t,e,n,r,i,a,o,s,y);return y}}function C(t,e,n,r,i,a,o,s){if(!(K(t,n)<D(i,o)||D(t,n)>K(i,o)||K(e,r)<D(a,s)||D(e,r)>K(a,s))){var c=(t*r-e*n)*(i-o)-(t-n)*(i*s-a*o),l=(t*r-e*n)*(a-s)-(e-r)*(i*s-a*o),u=(t-n)*(a-s)-(e-r)*(i-o);if(u){var f=c/u,y=l/u,h=+f.toFixed(2),x=+y.toFixed(2);if(!(h<+D(t,n).toFixed(2)||h>+K(t,n).toFixed(2)||h<+D(i,o).toFixed(2)||h>+K(i,o).toFixed(2)||x<+D(e,r).toFixed(2)||x>+K(e,r).toFixed(2)||x<+D(a,s).toFixed(2)||x>+K(a,s).toFixed(2)))return{x:f,y:y}}}}function k(t,e,n){var r=p(t),i=p(e);if(!v(r,i))return n?0:[];for(var a=b.apply(0,t),o=b.apply(0,e),s=~~(a/8),c=~~(o/8),l=[],u=[],f={},y=n?0:[],h=0;s+1>h;h++){var g=x.apply(0,t.concat(h/s));l.push({x:g.x,y:g.y,t:h/s})}for(h=0;c+1>h;h++)g=x.apply(0,e.concat(h/c)),u.push({x:g.x,y:g.y,t:h/c});for(h=0;s>h;h++)for(var d=0;c>d;d++){var m=l[h],k=l[h+1],M=u[d],w=u[d+1],A=Y(k.x-m.x)<.001?"y":"x",S=Y(w.x-M.x)<.001?"y":"x",F=C(m.x,m.y,k.x,k.y,M.x,M.y,w.x,w.y);if(F){if(f[F.x.toFixed(4)]==F.y.toFixed(4))continue;f[F.x.toFixed(4)]=F.y.toFixed(4);var q=m.t+Y((F[A]-m[A])/(k[A]-m[A]))*(k.t-m.t),B=M.t+Y((F[S]-M[S])/(w[S]-M[S]))*(w.t-M.t);q>=0&&1>=q&&B>=0&&1>=B&&(n?y++:y.push({x:F.x,y:F.y,t1:q,t2:B}))}}return y}function M(t,e){return A(t,e)}function w(t,e){return A(t,e,1)}function A(t,e,n){t=N(t),e=N(e);for(var r,i,a,o,s,c,l,u,f,y,h=n?0:[],x=0,p=t.length;p>x;x++){var g=t[x];if("M"==g[0])r=s=g[1],i=c=g[2];else{"C"==g[0]?(f=[r,i].concat(g.slice(1)),r=f[6],i=f[7]):(f=[r,i,r,i,s,c,s,c],r=s,i=c);for(var v=0,d=e.length;d>v;v++){var b=e[v];if("M"==b[0])a=l=b[1],o=u=b[2];else{"C"==b[0]?(y=[a,o].concat(b.slice(1)),a=y[6],o=y[7]):(y=[a,o,a,o,l,u,l,u],a=l,o=u);var m=k(f,y,n);if(n)h+=m;else{for(var C=0,M=m.length;M>C;C++)m[C].segment1=x,m[C].segment2=v,m[C].bez1=f,m[C].bez2=y;h=h.concat(m)}}}}}return h}function S(t,e,n){var r=F(t);return g(r,e,n)&&A(t,[["M",e,n],["H",r.x2+10]],1)%2==1}function F(t){var n=e(t);if(n.bbox)return i(n.bbox);if(!t)return l();t=N(t);for(var r,a=0,o=0,s=[],c=[],u=0,f=t.length;f>u;u++)if(r=t[u],"M"==r[0])a=r[1],o=r[2],s.push(a),c.push(o);else{var y=U(a,o,r[1],r[2],r[3],r[4],r[5],r[6]);s=s.concat(y.min.x,y.max.x),c=c.concat(y.min.y,y.max.y),a=r[5],o=r[6]}var h=D.apply(0,s),x=D.apply(0,c),p=K.apply(0,s),g=K.apply(0,c),v=l(h,x,p-h,g-x);return n.bbox=i(v),v}function q(t,e,n,r,i){if(i)return[["M",+t+ +i,e],["l",n-2*i,0],["a",i,i,0,0,1,i,i],["l",0,r-2*i],["a",i,i,0,0,1,-i,i],["l",2*i-n,0],["a",i,i,0,0,1,-i,-i],["l",0,2*i-r],["a",i,i,0,0,1,i,-i],["z"]];var a=[["M",t,e],["l",n,0],["l",0,r],["l",-n,0],["z"]];return a.toString=u,a}function B(t,e,n,r,i){if(null==i&&null==r&&(r=n),t=+t,e=+e,n=+n,r=+r,null!=i)var a=Math.PI/180,o=t+n*Math.cos(-r*a),s=t+n*Math.cos(-i*a),c=e+n*Math.sin(-r*a),l=e+n*Math.sin(-i*a),f=[["M",o,c],["A",n,n,0,+(i-r>180),0,s,l]];else f=[["M",t,e],["m",0,-r],["a",n,r,0,1,1,0,2*r],["a",n,r,0,1,1,0,-2*r],["z"]];return f.toString=u,f}function _(t){var n=e(t),i=String.prototype.toLowerCase;if(n.rel)return f(n.rel);r(t,"array")&&r(t&&t[0],"array")||(t=a(t));var o=[],s=0,c=0,l=0,y=0,h=0;"M"==t[0][0]&&(s=t[0][1],c=t[0][2],l=s,y=c,h++,o.push(["M",s,c]));for(var x=h,p=t.length;p>x;x++){var g=o[x]=[],v=t[x];if(v[0]!=i.call(v[0]))switch(g[0]=i.call(v[0]),g[0]){case"a":g[1]=v[1],g[2]=v[2],g[3]=v[3],g[4]=v[4],g[5]=v[5],g[6]=+(v[6]-s).toFixed(3),g[7]=+(v[7]-c).toFixed(3);break;case"v":g[1]=+(v[1]-c).toFixed(3);break;case"m":l=v[1],y=v[2];default:for(var d=1,b=v.length;b>d;d++)g[d]=+(v[d]-(d%2?s:c)).toFixed(3)}else{g=o[x]=[],"m"==v[0]&&(l=v[1]+s,y=v[2]+c);for(var m=0,C=v.length;C>m;m++)o[x][m]=v[m]}var k=o[x].length;switch(o[x][0]){case"z":s=l,c=y;break;case"h":s+=+o[x][k-1];break;case"v":c+=+o[x][k-1];break;default:s+=+o[x][k-2],c+=+o[x][k-1]}}return o.toString=u,n.rel=f(o),o}function L(t){var n=e(t);if(n.abs)return f(n.abs);if(r(t,"array")&&r(t&&t[0],"array")||(t=a(t)),!t||!t.length)return[["M",0,0]];var i,o=[],s=0,c=0,l=0,y=0,h=0;"M"==t[0][0]&&(s=+t[0][1],c=+t[0][2],l=s,y=c,h++,o[0]=["M",s,c]);for(var x,p,g=3==t.length&&"M"==t[0][0]&&"R"==t[1][0].toUpperCase()&&"Z"==t[2][0].toUpperCase(),v=h,d=t.length;d>v;v++){if(o.push(x=[]),p=t[v],i=p[0],i!=i.toUpperCase())switch(x[0]=i.toUpperCase(),x[0]){case"A":x[1]=p[1],x[2]=p[2],x[3]=p[3],x[4]=p[4],x[5]=p[5],x[6]=+p[6]+s,x[7]=+p[7]+c;break;case"V":x[1]=+p[1]+c;break;case"H":x[1]=+p[1]+s;break;case"R":for(var b=[s,c].concat(p.slice(1)),m=2,C=b.length;C>m;m++)b[m]=+b[m]+s,b[++m]=+b[m]+c;o.pop(),o=o.concat(j(b,g));break;case"O":o.pop(),b=B(s,c,p[1],p[2]),b.push(b[0]),o=o.concat(b);break;case"U":o.pop(),o=o.concat(B(s,c,p[1],p[2],p[3])),x=["U"].concat(o[o.length-1].slice(-2));break;case"M":l=+p[1]+s,y=+p[2]+c;default:for(m=1,C=p.length;C>m;m++)x[m]=+p[m]+(m%2?s:c)}else if("R"==i)b=[s,c].concat(p.slice(1)),o.pop(),o=o.concat(j(b,g)),x=["R"].concat(p.slice(-2));else if("O"==i)o.pop(),b=B(s,c,p[1],p[2]),b.push(b[0]),o=o.concat(b);else if("U"==i)o.pop(),o=o.concat(B(s,c,p[1],p[2],p[3])),x=["U"].concat(o[o.length-1].slice(-2));else for(var k=0,M=p.length;M>k;k++)x[k]=p[k];if(i=i.toUpperCase(),"O"!=i)switch(x[0]){case"Z":s=+l,c=+y;break;case"H":s=x[1];break;case"V":c=x[1];break;case"M":l=x[x.length-2],y=x[x.length-1];default:s=x[x.length-2],c=x[x.length-1]}}return o.toString=u,n.abs=f(o),o}function I(t,e,n,r){return[t,e,n,r,n,r]}function z(t,e,n,r,i,a){var o=1/3,s=2/3;return[o*t+s*n,o*e+s*r,o*i+s*n,o*a+s*r,i,a]}function T(t,e,r,i,a,o,s,c,l,u){var f,y=120*V/180,h=V/180*(+a||0),x=[],p=n(function(t,e,n){var r=t*Q.cos(n)-e*Q.sin(n),i=t*Q.sin(n)+e*Q.cos(n);return{x:r,y:i}});if(u)w=u[0],A=u[1],k=u[2],M=u[3];else{f=p(t,e,-h),t=f.x,e=f.y,f=p(c,l,-h),c=f.x,l=f.y;var g=(Q.cos(V/180*a),Q.sin(V/180*a),(t-c)/2),v=(e-l)/2,d=g*g/(r*r)+v*v/(i*i);d>1&&(d=Q.sqrt(d),r=d*r,i=d*i);var b=r*r,m=i*i,C=(o==s?-1:1)*Q.sqrt(Y((b*m-b*v*v-m*g*g)/(b*v*v+m*g*g))),k=C*r*v/i+(t+c)/2,M=C*-i*g/r+(e+l)/2,w=Q.asin(((e-M)/i).toFixed(9)),A=Q.asin(((l-M)/i).toFixed(9));w=k>t?V-w:w,A=k>c?V-A:A,0>w&&(w=2*V+w),0>A&&(A=2*V+A),s&&w>A&&(w-=2*V),!s&&A>w&&(A-=2*V)}var S=A-w;if(Y(S)>y){var F=A,q=c,B=l;A=w+y*(s&&A>w?1:-1),c=k+r*Q.cos(A),l=M+i*Q.sin(A),x=T(c,l,r,i,a,0,s,q,B,[A,F,k,M])}S=A-w;var _=Q.cos(w),E=Q.sin(w),L=Q.cos(A),I=Q.sin(A),z=Q.tan(S/4),U=4/3*r*z,N=4/3*i*z,P=[t,e],j=[t+U*E,e-N*_],R=[c+U*I,l-N*L],O=[c,l];if(j[0]=2*P[0]-j[0],j[1]=2*P[1]-j[1],u)return[j,R,O].concat(x);x=[j,R,O].concat(x).join().split(",");for(var H=[],D=0,K=x.length;K>D;D++)H[D]=D%2?p(x[D-1],x[D],h).y:p(x[D],x[D+1],h).x;return H}function U(t,e,n,r,i,a,o,s){for(var c,l,u,f,y,h,x,p,g=[],v=[[],[]],d=0;2>d;++d)if(0==d?(l=6*t-12*n+6*i,c=-3*t+9*n-9*i+3*o,u=3*n-3*t):(l=6*e-12*r+6*a,c=-3*e+9*r-9*a+3*s,u=3*r-3*e),Y(c)<1e-12){if(Y(l)<1e-12)continue;f=-u/l,f>0&&1>f&&g.push(f)}else x=l*l-4*u*c,p=Q.sqrt(x),0>x||(y=(-l+p)/(2*c),y>0&&1>y&&g.push(y),h=(-l-p)/(2*c),h>0&&1>h&&g.push(h));for(var b,m=g.length,C=m;m--;)f=g[m],b=1-f,v[0][m]=b*b*b*t+3*b*b*f*n+3*b*f*f*i+f*f*f*o,v[1][m]=b*b*b*e+3*b*b*f*r+3*b*f*f*a+f*f*f*s;return v[0][C]=t,v[1][C]=e,v[0][C+1]=o,v[1][C+1]=s,v[0].length=v[1].length=C+2,{min:{x:D.apply(0,v[0]),y:D.apply(0,v[1])},max:{x:K.apply(0,v[0]),y:K.apply(0,v[1])}}}function N(t,n){var r=!n&&e(t);if(!n&&r.curve)return f(r.curve);for(var i=L(t),a=n&&L(n),o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},c=(function(t,e,n){var r,i;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"].concat(T.apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":"C"==n||"S"==n?(r=2*e.x-e.bx,i=2*e.y-e.by):(r=e.x,i=e.y),t=["C",r,i].concat(t.slice(1));break;case"T":"Q"==n||"T"==n?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"].concat(z(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(z(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(I(e.x,e.y,t[1],t[2]));break;case"H":t=["C"].concat(I(e.x,e.y,t[1],e.y));break;case"V":t=["C"].concat(I(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"].concat(I(e.x,e.y,e.X,e.Y))}return t}),l=function(t,e){if(t[e].length>7){t[e].shift();for(var n=t[e];n.length;)y[e]="A",a&&(h[e]="A"),t.splice(e++,0,["C"].concat(n.splice(0,6)));t.splice(e,1),v=K(i.length,a&&a.length||0)}},u=function(t,e,n,r,o){t&&e&&"M"==t[o][0]&&"M"!=e[o][0]&&(e.splice(o,0,["M",r.x,r.y]),n.bx=0,n.by=0,n.x=t[o][1],n.y=t[o][2],v=K(i.length,a&&a.length||0))},y=[],h=[],x="",p="",g=0,v=K(i.length,a&&a.length||0);v>g;g++){i[g]&&(x=i[g][0]),"C"!=x&&(y[g]=x,g&&(p=y[g-1])),i[g]=c(i[g],o,p),"A"!=y[g]&&"C"==x&&(y[g]="C"),l(i,g),a&&(a[g]&&(x=a[g][0]),"C"!=x&&(h[g]=x,g&&(p=h[g-1])),a[g]=c(a[g],s,p),"A"!=h[g]&&"C"==x&&(h[g]="C"),l(a,g)),u(i,a,o,s,g),u(a,i,s,o,g);var d=i[g],b=a&&a[g],m=d.length,C=a&&b.length;o.x=d[m-2],o.y=d[m-1],o.bx=H(d[m-4])||o.x,o.by=H(d[m-3])||o.y,s.bx=a&&(H(b[C-4])||s.x),s.by=a&&(H(b[C-3])||s.y),s.x=a&&b[C-2],s.y=a&&b[C-1]}return a||(r.curve=f(i)),a?[i,a]:i}function P(t,e){if(!e)return t;var n,r,i,a,o,s,c;for(t=N(t),i=0,o=t.length;o>i;i++)for(c=t[i],a=1,s=c.length;s>a;a+=2)n=e.x(c[a],c[a+1]),r=e.y(c[a],c[a+1]),c[a]=n,c[a+1]=r;return t}function j(t,e){for(var n=[],r=0,i=t.length;i-2*!e>r;r+=2){var a=[{x:+t[r-2],y:+t[r-1]},{x:+t[r],y:+t[r+1]},{x:+t[r+2],y:+t[r+3]},{x:+t[r+4],y:+t[r+5]}];e?r?i-4==r?a[3]={x:+t[0],y:+t[1]}:i-2==r&&(a[2]={x:+t[0],y:+t[1]},a[3]={x:+t[2],y:+t[3]}):a[0]={x:+t[i-2],y:+t[i-1]}:i-4==r?a[3]=a[2]:r||(a[0]={x:+t[r],y:+t[r+1]}),n.push(["C",(-a[0].x+6*a[1].x+a[2].x)/6,(-a[0].y+6*a[1].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return n}var R="hasOwnProperty",O=/,?([a-z]),?/gi,H=parseFloat,Q=Math,V=Q.PI,D=Q.min,K=Q.max,X=Q.pow,Y=Q.abs,G=String,Z=Object.prototype.toString,W=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,$=/(-?\d*\.?\d*(?:e[\-+]?\\d+)?)[\s]*,?[\s]*/gi,J=h(1),tt=h(),et=h(0,1),nt={path:function(t){return t.attr("path")},circle:function(t){var e=c(t);return B(e.cx,e.cy,e.r)},ellipse:function(t){var e=c(t);return B(e.cx||0,e.cy||0,e.rx,e.ry)},rect:function(t){var e=c(t);return q(e.x||0,e.y||0,e.width,e.height,e.rx,e.ry)},image:function(t){var e=c(t);return q(e.x||0,e.y||0,e.width,e.height)},line:function(t){return"M"+[t.attr("x1")||0,t.attr("y1")||0,t.attr("x2"),t.attr("y2")]},polyline:function(t){return"M"+t.attr("points")},polygon:function(t){return"M"+t.attr("points")+"z"},deflt:function(t){var e=t.node.getBBox();return q(e.x,e.y,e.width,e.height)}};t({getTotalLength:J,getPointAtLength:tt,getSubpath:function(t,e,n){if(this.getTotalLength(t)-n<1e-6)return et(t,e).end;var r=et(t,n,1);return e?et(r,e).end:r},findDotsAtSegment:x,bezierBBox:p,isPointInsideBBox:g,isBBoxIntersect:v,intersection:M,intersectionNumber:w,isPointInside:S,getBBox:F,get:nt,toRelative:_,toAbsolute:L,toCubic:N,map:P,toString:u,clone:f})})}(this);